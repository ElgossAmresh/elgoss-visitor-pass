
{% extends 'security_base.html' %}

{% block title %}Active-visitor{% endblock title %}
 <link href="../static/visitor.css" rel="stylesheet" />


{% block body %}  
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">  
<link href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap5.min.css" rel="stylesheet">
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap5.min.js"></script>
      


<div class="table-container">
    <div class="dropdown">
        <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          Dropdown button
        </button>
        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
          <a class="dropdown-item" href="#">Action</a>
          <a class="dropdown-item" href="#">Another action</a>
          <a class="dropdown-item" href="#">Something else here</a>
        </div>

        <form class="row row-cols-sm-auto">
            <div class="col-12">
                <div class="dp-hidden position-absolute">
                    <div class="input-group">
                        <input
                            name="datepicker"
                            class="form-control"
                            ngbDatepicker
                            #datepicker="ngbDatepicker"
                            [autoClose]="'outside'"
                            (dateSelect)="onDateSelection($event)"
                            [displayMonths]="2"
                            [dayTemplate]="t"
                            outsideDays="hidden"
                            [startDate]="fromDate!"
                            tabindex="-1"
                        />
                        <ng-template #t let-date let-focused="focused">
                            <span
                                class="custom-day"
                                [class.focused]="focused"
                                [class.range]="isRange(date)"
                                [class.faded]="isHovered(date) || isInside(date)"
                                (mouseenter)="hoveredDate = date"
                                (mouseleave)="hoveredDate = null"
                            >
                                {{ date.day }}
                            </span>
                        </ng-template>
                    </div>
                </div>
                <div class="input-group">
                    <input
                        #dpFromDate
                        class="form-control"
                        placeholder="yyyy-mm-dd"
                        name="dpFromDate"
                        [value]="formatter.format(fromDate)"
                        (input)="fromDate = validateInput(fromDate, dpFromDate.value)"
                    />
                    <button class="btn btn-outline-secondary bi bi-calendar3" (click)="datepicker.toggle()" type="button"></button>
                </div>
            </div>
            <div class="col-12">
                <div class="input-group">
                    <input
                        #dpToDate
                        class="form-control"
                        placeholder="yyyy-mm-dd"
                        name="dpToDate"
                        [value]="formatter.format(toDate)"
                        (input)="toDate = validateInput(toDate, dpToDate.value)"
                    />
                    <button class="btn btn-outline-secondary bi bi-calendar3" (click)="datepicker.toggle()" type="button"></button>
                </div>
            </div>
        </form>
        
        <hr />
        <pre>From date model: {{ fromDate | json }}</pre>
        <pre>To date model: {{ toDate | json }}</pre>
      </div>


            <table id="example" class="table table-striped table-bordered nowrap" style="width:100%">
                <thead class="table-dark">
                    <tr>
                    <th>Sr No</th>
                  <th>Name</th>
                  <th>Email</th>
                  <th>Phone No</th>
                  <th>Card</th>
                  <th>UID No</th>
                  <th>Gender</th>
                  <th>Purpose</th>
                  <th>Approved</th>
                  <th>Entry Details</th>
                  <th>Exit Details</th>
                    </tr>
                </thead>
                
                <tbody>
                    {% for visitor in visitobj%}
                    <tr>
                    <td>{{ loop.index }}</td>
                    <td>{{ visitor['Name'] }}</td>

                    <td>{{ visitor['Email'] }}</td>
                    <td>{{ visitor['Phone'] }}</td>
                    <td>{{ visitor['Card'] }}</td>
                    <td>{{ visitor['UID'] }}</td>

                    <td>{{ visitor['Gender'] }}</td>
                    <td>{{ visitor['Purpose'] }}</td>
                    <td>{{ visitor['Approvedby'] }}</td>
                    <td>{{ visitor['Date'] }}</td>
                    <td>{{ visitor['Exittime'] }}</td>
                </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
        </div>
        <script>
            $(document).ready(function() {
                $('#example ,#example1,#example2').DataTable({
                    responsive: true
                });
            });
        </script>
{% endblock body %}
